import{u as ee,i as te,a as le,l as ae,c as oe,d as se,e as ne,f as ie,H as k}from"./echarts-a243c330.js";import{b as de,x as ue,p as re,z as pe,t as me,A as ce,B as fe,h as p,j as _e}from"./element-b9b1fa5e.js";import{_ as ye}from"./index-cb2b234a.js";import{l as B,r as F,c as A,m as he,al as i,z as C,A as R,B as o,R as e,J as l,u as m,O as c,D as T,P as _,Q as ve,a4 as be,I as ge,M as xe}from"./vendor-f95dc610.js";const Ce={class:"reports"},we={class:"report-filters"},Ve={class:"summary-table"},ke={class:"savings-value"},Be={class:"trend-charts"},Fe={class:"chart-container"},Ae={class:"chart-container"},Re={class:"cost-waterfall"},Te={class:"drill-down-table"},Ue={class:"table-filters"},Ie={class:"cost-value"},Le={class:"layout-management"},Pe={class:"card-header"},Ee={class:"layout-list"},Se={class:"layout-info"},Qe={class:"layout-name"},$e={class:"layout-desc"},ze={class:"layout-meta"},De={class:"layout-actions"},We={class:"reconciliation-options"},Ne={__name:"Reports",setup(Me){ee([te,le,ae,oe,se,ne,ie]);const h=B({reportType:"daily",dimension:"shift",dateRange:[]}),v=B({steelType:"",batch:"",shift:""}),P=F([{dimension:"白班",hitRate:97.2,pFluctuation:.0028,limeConsumption:45.2,fluoriteConsumption:8.5,energyConsumption:125.6,furnaceLife:1250,savings:15.8},{dimension:"中班",hitRate:96.8,pFluctuation:.0031,limeConsumption:46.1,fluoriteConsumption:8.8,energyConsumption:128.2,furnaceLife:1180,savings:12.5},{dimension:"夜班",hitRate:96.5,pFluctuation:.0035,limeConsumption:47.3,fluoriteConsumption:9.2,energyConsumption:131.5,furnaceLife:1150,savings:10.2}]),E=F([{date:"2024-01-15",shift:"白班",furnace:"F001",steelType:"Q235B",batch:"A",hitRate:97.5,pContent:.025,limeUsed:120,fluoriteUsed:15,energyUsed:1250,cost:2850},{date:"2024-01-15",shift:"白班",furnace:"F002",steelType:"Q345B",batch:"B",hitRate:96.8,pContent:.023,limeUsed:135,fluoriteUsed:18,energyUsed:1280,cost:3120}]),d=B({name:"",description:"",shared:!1}),b=F([{id:1,name:"标准日报布局",description:"包含所有KPI指标的日报布局",createTime:"2024-01-15",shared:!0},{id:2,name:"成本分析布局",description:"专注于成本分析的布局",createTime:"2024-01-14",shared:!1}]),S=A(()=>({tooltip:{trigger:"axis"},legend:{data:["命中率","P波动","石灰单耗","能耗"]},xAxis:{type:"category",data:["1/1","1/2","1/3","1/4","1/5","1/6","1/7"]},yAxis:[{type:"value",name:"命中率(%)",position:"left"},{type:"value",name:"其他",position:"right"}],series:[{name:"命中率",type:"line",yAxisIndex:0,data:[96.2,97.1,96.8,97.5,97.2,96.9,97.2],smooth:!0,itemStyle:{color:"#67C23A"}},{name:"P波动",type:"line",yAxisIndex:1,data:[.0045,.0032,.0028,.0025,.0028,.0031,.0028],smooth:!0,itemStyle:{color:"#F56C6C"}},{name:"石灰单耗",type:"line",yAxisIndex:1,data:[48.2,47.8,46.5,45.2,45.8,46.1,45.5],smooth:!0,itemStyle:{color:"#409EFF"}},{name:"能耗",type:"line",yAxisIndex:1,data:[130.5,128.2,125.6,124.8,125.2,126.1,125.8],smooth:!0,itemStyle:{color:"#E6A23C"}}]})),Q=A(()=>({tooltip:{trigger:"axis"},legend:{data:["白班","中班","夜班"]},xAxis:{type:"category",data:["命中率","P波动","石灰单耗","能耗","节约金额"]},yAxis:{type:"value"},series:[{name:"白班",type:"bar",data:[97.2,.0028,45.2,125.6,15.8],itemStyle:{color:"#67C23A"}},{name:"中班",type:"bar",data:[96.8,.0031,46.1,128.2,12.5],itemStyle:{color:"#409EFF"}},{name:"夜班",type:"bar",data:[96.5,.0035,47.3,131.5,10.2],itemStyle:{color:"#F56C6C"}}]})),$=A(()=>({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["原料成本","能耗成本","耐材成本","人工成本","总成本","节约金额"]},yAxis:{type:"value",name:"金额(万元)"},series:[{name:"成本构成",type:"bar",data:[120,45,25,15,205,-38],itemStyle:{color:function(u){return u.dataIndex===5?"#67C23A":"#409EFF"}}}]})),z=()=>{p.success("报表生成中...")},D=()=>{p.success("Excel导出中...")},W=()=>{p.success("筛选条件已应用")},U=u=>u>=97?"hit-rate-excellent":u>=95?"hit-rate-good":"hit-rate-poor",N=u=>u<=.003?"p-fluctuation-excellent":u<=.005?"p-fluctuation-good":"p-fluctuation-poor",M=()=>{if(!d.name){p.warning("请输入布局名称");return}const u={id:b.value.length+1,name:d.name,description:d.description,createTime:new Date().toLocaleDateString("zh-CN"),shared:d.shared};b.value.push(u),d.name="",d.description="",d.shared=!1,p.success("布局已保存")},O=u=>{p.success(`已加载布局: ${u.name}`)},K=u=>{_e.confirm("确定要删除这个布局吗？","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=b.value.findIndex(s=>s.id===u.id);t>-1&&(b.value.splice(t,1),p.success("布局已删除"))})},H=()=>{p.info("与基线对比分析中...")},j=()=>{p.info("与目标对比分析中...")},J=()=>{p.info("与上期对比分析中...")};return he(()=>{console.log("报表中心页面已加载")}),(u,t)=>{const s=i("el-option"),g=i("el-select"),r=i("el-col"),q=i("el-date-picker"),y=i("el-icon"),f=i("el-button"),x=i("el-row"),n=i("el-table-column"),I=i("el-table"),L=i("el-input"),w=i("el-form-item"),G=i("el-switch"),X=i("el-form"),V=i("el-card"),Y=i("el-tag");return C(),R("div",Ce,[o("div",we,[e(x,{gutter:20},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(g,{modelValue:h.reportType,"onUpdate:modelValue":t[0]||(t[0]=a=>h.reportType=a),placeholder:"报表类型"},{default:l(()=>[e(s,{label:"日报",value:"daily"}),e(s,{label:"周报",value:"weekly"}),e(s,{label:"月报",value:"monthly"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(g,{modelValue:h.dimension,"onUpdate:modelValue":t[1]||(t[1]=a=>h.dimension=a),placeholder:"聚合维度"},{default:l(()=>[e(s,{label:"按班次",value:"shift"}),e(s,{label:"按炉次",value:"furnace"}),e(s,{label:"按钢种",value:"steelType"}),e(s,{label:"按日期",value:"date"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(q,{modelValue:h.dateRange,"onUpdate:modelValue":t[2]||(t[2]=a=>h.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(f,{type:"primary",onClick:z},{default:l(()=>[e(y,null,{default:l(()=>[e(m(de))]),_:1}),t[9]||(t[9]=c(" 生成报表 ",-1))]),_:1}),e(f,{onClick:D},{default:l(()=>[e(y,null,{default:l(()=>[e(m(ue))]),_:1}),t[10]||(t[10]=c(" 导出Excel ",-1))]),_:1})]),_:1})]),_:1})]),o("div",Ve,[t[11]||(t[11]=o("h3",null,"KPI汇总表",-1)),e(I,{data:P.value,border:"",stripe:"",style:{width:"100%"}},{default:l(()=>[e(n,{prop:"dimension",label:"维度",width:"120"}),e(n,{prop:"hitRate",label:"命中率(%)",width:"100"},{default:l(({row:a})=>[o("span",{class:T(U(a.hitRate))},_(a.hitRate),3)]),_:1}),e(n,{prop:"pFluctuation",label:"P波动(%)",width:"100"},{default:l(({row:a})=>[o("span",{class:T(N(a.pFluctuation))},_(a.pFluctuation),3)]),_:1}),e(n,{prop:"limeConsumption",label:"石灰单耗(kg/t)",width:"120"}),e(n,{prop:"fluoriteConsumption",label:"萤石单耗(kg/t)",width:"120"}),e(n,{prop:"energyConsumption",label:"能耗(kWh/t)",width:"120"}),e(n,{prop:"furnaceLife",label:"炉衬寿命(炉)",width:"120"}),e(n,{prop:"savings",label:"节约金额(万元)",width:"120"},{default:l(({row:a})=>[o("span",ke,"¥"+_(a.savings),1)]),_:1})]),_:1},8,["data"])]),o("div",Be,[e(x,{gutter:20},{default:l(()=>[e(r,{span:12},{default:l(()=>[o("div",Fe,[t[12]||(t[12]=o("h3",null,"KPI时序趋势",-1)),e(m(k),{option:S.value,style:{height:"300px"}},null,8,["option"])])]),_:1}),e(r,{span:12},{default:l(()=>[o("div",Ae,[t[13]||(t[13]=o("h3",null,"班组对比",-1)),e(m(k),{option:Q.value,style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1})]),o("div",Re,[t[14]||(t[14]=o("h3",null,"成本节约瀑布图",-1)),e(m(k),{option:$.value,style:{height:"400px"}},null,8,["option"])]),o("div",Te,[t[16]||(t[16]=o("h3",null,"多维度钻取表",-1)),o("div",Ue,[e(x,{gutter:20},{default:l(()=>[e(r,{span:6},{default:l(()=>[e(g,{modelValue:v.steelType,"onUpdate:modelValue":t[3]||(t[3]=a=>v.steelType=a),placeholder:"钢种",clearable:""},{default:l(()=>[e(s,{label:"全部",value:""}),e(s,{label:"Q235B",value:"Q235B"}),e(s,{label:"Q345B",value:"Q345B"}),e(s,{label:"Q420B",value:"Q420B"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(g,{modelValue:v.batch,"onUpdate:modelValue":t[4]||(t[4]=a=>v.batch=a),placeholder:"原料批次",clearable:""},{default:l(()=>[e(s,{label:"全部",value:""}),e(s,{label:"批次A",value:"A"}),e(s,{label:"批次B",value:"B"}),e(s,{label:"批次C",value:"C"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(g,{modelValue:v.shift,"onUpdate:modelValue":t[5]||(t[5]=a=>v.shift=a),placeholder:"班组",clearable:""},{default:l(()=>[e(s,{label:"全部",value:""}),e(s,{label:"白班",value:"day"}),e(s,{label:"中班",value:"middle"}),e(s,{label:"夜班",value:"night"})]),_:1},8,["modelValue"])]),_:1}),e(r,{span:6},{default:l(()=>[e(f,{type:"primary",onClick:W},{default:l(()=>[e(y,null,{default:l(()=>[e(m(re))]),_:1}),t[15]||(t[15]=c(" 应用筛选 ",-1))]),_:1})]),_:1})]),_:1})]),e(I,{data:E.value,border:"",stripe:"",style:{width:"100%"},"max-height":"400"},{default:l(()=>[e(n,{prop:"date",label:"日期",width:"100"}),e(n,{prop:"shift",label:"班次",width:"80"}),e(n,{prop:"furnace",label:"炉次",width:"80"}),e(n,{prop:"steelType",label:"钢种",width:"100"}),e(n,{prop:"batch",label:"原料批次",width:"100"}),e(n,{prop:"hitRate",label:"命中率(%)",width:"100"},{default:l(({row:a})=>[o("span",{class:T(U(a.hitRate))},_(a.hitRate),3)]),_:1}),e(n,{prop:"pContent",label:"P含量(%)",width:"100"}),e(n,{prop:"limeUsed",label:"石灰用量(kg)",width:"120"}),e(n,{prop:"fluoriteUsed",label:"萤石用量(kg)",width:"120"}),e(n,{prop:"energyUsed",label:"能耗(kWh)",width:"100"}),e(n,{prop:"cost",label:"成本(元)",width:"100"},{default:l(({row:a})=>[o("span",Ie,"¥"+_(a.cost),1)]),_:1})]),_:1},8,["data"])]),o("div",Le,[t[27]||(t[27]=o("h3",null,"报表布局管理",-1)),e(x,{gutter:20},{default:l(()=>[e(r,{span:8},{default:l(()=>[e(V,null,{header:l(()=>[o("div",Pe,[t[18]||(t[18]=o("span",null,"保存当前布局",-1)),e(f,{type:"primary",size:"small",onClick:M},{default:l(()=>[e(y,null,{default:l(()=>[e(m(pe))]),_:1}),t[17]||(t[17]=c(" 保存 ",-1))]),_:1})])]),default:l(()=>[e(X,{model:d,"label-width":"80px"},{default:l(()=>[e(w,{label:"布局名称"},{default:l(()=>[e(L,{modelValue:d.name,"onUpdate:modelValue":t[6]||(t[6]=a=>d.name=a),placeholder:"输入布局名称"},null,8,["modelValue"])]),_:1}),e(w,{label:"描述"},{default:l(()=>[e(L,{modelValue:d.description,"onUpdate:modelValue":t[7]||(t[7]=a=>d.description=a),type:"textarea",placeholder:"输入布局描述"},null,8,["modelValue"])]),_:1}),e(w,{label:"共享"},{default:l(()=>[e(G,{modelValue:d.shared,"onUpdate:modelValue":t[8]||(t[8]=a=>d.shared=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),e(r,{span:8},{default:l(()=>[e(V,null,{header:l(()=>[...t[19]||(t[19]=[o("span",null,"加载布局",-1)])]),default:l(()=>[o("div",Ee,[(C(!0),R(ve,null,be(b.value,a=>(C(),R("div",{key:a.id,class:"layout-item"},[o("div",Se,[o("div",Qe,_(a.name),1),o("div",$e,_(a.description),1),o("div",ze,[o("span",null,_(a.createTime),1),a.shared?(C(),ge(Y,{key:0,type:"success",size:"small"},{default:l(()=>[...t[20]||(t[20]=[c("共享",-1)])]),_:1})):xe("",!0)])]),o("div",De,[e(f,{size:"small",onClick:Z=>O(a)},{default:l(()=>[...t[21]||(t[21]=[c("加载",-1)])]),_:1},8,["onClick"]),e(f,{size:"small",type:"danger",onClick:Z=>K(a)},{default:l(()=>[...t[22]||(t[22]=[c("删除",-1)])]),_:1},8,["onClick"])])]))),128))])]),_:1})]),_:1}),e(r,{span:8},{default:l(()=>[e(V,null,{header:l(()=>[...t[23]||(t[23]=[o("span",null,"一键对账",-1)])]),default:l(()=>[o("div",We,[e(f,{type:"primary",onClick:H},{default:l(()=>[e(y,null,{default:l(()=>[e(m(me))]),_:1}),t[24]||(t[24]=c(" 与基线对比 ",-1))]),_:1}),e(f,{type:"success",onClick:j},{default:l(()=>[e(y,null,{default:l(()=>[e(m(ce))]),_:1}),t[25]||(t[25]=c(" 与目标对比 ",-1))]),_:1}),e(f,{type:"warning",onClick:J},{default:l(()=>[e(y,null,{default:l(()=>[e(m(fe))]),_:1}),t[26]||(t[26]=c(" 与上期对比 ",-1))]),_:1})])]),_:1})]),_:1})]),_:1})])])}}},Je=ye(Ne,[["__scopeId","data-v-1fa3488a"]]);export{Je as default};
