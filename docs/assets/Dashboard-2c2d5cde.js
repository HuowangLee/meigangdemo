import{c as f,al as u,z as d,A as x,B as t,P as o,I as v,J as a,R as e,u as c,D as j,aA as G,r,m as W,M as Y,O as S,Q as Z,a4 as ee}from"./vendor-f95dc610.js";import{u as te,i as ae,a as se,b as le,c as oe,d as ne,e as ie,f as re,H as R}from"./echarts-a243c330.js";import{e as de,c as ue,f as ce,r as pe,w as _e,g as me,s as ve}from"./element-b9b1fa5e.js";import{_ as V}from"./index-cb2b234a.js";const ge={class:"kpi-header"},he={class:"trend-indicator"},fe={class:"trend-value"},ye={class:"kpi-content"},ke={class:"kpi-value"},Ce={class:"value"},be={class:"unit"},xe={class:"kpi-target"},Fe={class:"target-value"},we={class:"kpi-progress"},Re={__name:"KpiCard",props:{title:{type:String,required:!0},value:{type:Number,required:!0},unit:{type:String,default:""},target:{type:Number,required:!0},trend:{type:Number,default:0},color:{type:String,default:"#409EFF"}},setup(n){const g=n,_=f(()=>g.target===0?0:Math.min(g.value/g.target*100,100)),y=f(()=>_.value>=100?"#67C23A":_.value>=80?"#E6A23C":"#F56C6C");return(F,k)=>{const h=u("el-icon"),w=u("el-progress");return d(),x("div",{class:j(["kpi-card",{"trend-up":n.trend>0,"trend-down":n.trend<0}])},[t("div",ge,[t("h3",null,o(n.title),1),t("div",he,[n.trend>0?(d(),v(h,{key:0,color:"#67C23A"},{default:a(()=>[e(c(de))]),_:1})):n.trend<0?(d(),v(h,{key:1,color:"#F56C6C"},{default:a(()=>[e(c(ue))]),_:1})):(d(),v(h,{key:2,color:"#909399"},{default:a(()=>[e(c(ce))]),_:1})),t("span",fe,o(Math.abs(n.trend))+"%",1)])]),t("div",ye,[t("div",ke,[t("span",Ce,o(n.value),1),t("span",be,o(n.unit),1)]),t("div",xe,[k[0]||(k[0]=t("span",{class:"target-label"},"目标值：",-1)),t("span",Fe,o(n.target)+o(n.unit),1)]),t("div",we,[e(w,{percentage:_.value,color:y.value,"show-text":!1},null,8,["percentage","color"])])])],2)}}},b=V(Re,[["__scopeId","data-v-89325065"]]);const $e={class:"dashboard"},Ae={class:"filter-bar"},Pe={class:"kpi-cards"},Se={class:"charts-section"},Ve={class:"chart-container"},Ee={class:"chart-container"},Te={class:"chart-container"},Me={class:"chart-container"},De={class:"furnace-cards"},Ne=["onClick"],Be={class:"furnace-header"},Oe={class:"furnace-id"},ze={class:"furnace-content"},qe={class:"stage-info"},Ie={class:"prediction-info"},Ke={class:"risk-indicator"},Ue={__name:"Dashboard",setup(n){te([ae,se,le,oe,ne,ie,re]);const g=G(),_=r("week"),y=r("furnace"),F=r([]),k=r(97.2),h=r(.0028),w=r(6.5),E=r(1250),T=r(2.1),M=r(-15.2),D=r(8.3),N=r(12.5),B=r([{id:"F001",status:"吹炼中",stage:"主吹期",estimatedEnd:"14:25",tempPrediction:1680,carbonPrediction:.08,slagRisk:"low"},{id:"F002",status:"取样中",stage:"终点调整",estimatedEnd:"14:35",tempPrediction:1650,carbonPrediction:.12,slagRisk:"medium"},{id:"F003",status:"准备中",stage:"装料",estimatedEnd:"15:10",tempPrediction:0,carbonPrediction:0,slagRisk:"low"}]),O=f(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["温度命中率","碳命中率","综合命中率"]},xAxis:{type:"category",data:["1/1","1/2","1/3","1/4","1/5","1/6","1/7"]},yAxis:{type:"value",min:90,max:100},series:[{name:"温度命中率",type:"line",data:[96.2,97.1,96.8,97.5,97.2,96.9,97.2],smooth:!0,itemStyle:{color:"#409EFF"}},{name:"碳命中率",type:"line",data:[95.8,96.5,97.2,96.8,97.1,96.7,97],smooth:!0,itemStyle:{color:"#67C23A"}},{name:"综合命中率",type:"line",data:[96,96.8,97,97.2,97.2,96.8,97.1],smooth:!0,itemStyle:{color:"#E6A23C"}}]})),z=f(()=>({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["1/1","1/2","1/3","1/4","1/5","1/6","1/7"]},yAxis:{type:"value",min:0,max:.01},series:[{name:"P波动",type:"line",data:[.0045,.0032,.0028,.0025,.0028,.0031,.0028],smooth:!0,itemStyle:{color:"#F56C6C"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(245, 108, 108, 0.3)"},{offset:1,color:"rgba(245, 108, 108, 0.1)"}]}}}]})),q=f(()=>({tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"未命中原因",type:"pie",radius:"50%",data:[{value:35,name:"温度偏差"},{value:28,name:"碳含量偏差"},{value:20,name:"渣系偏离"},{value:12,name:"设备波动"},{value:5,name:"其他"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),I=()=>{console.log("刷新数据...")},$=p=>{g.push("/reports")},K=p=>{g.push(`/furnace-realtime?id=${p}`)},U=p=>({吹炼中:"warning",取样中:"info",准备中:"success"})[p]||"info",H=p=>({high:"#F56C6C",medium:"#E6A23C",low:"#67C23A"})[p]||"#67C23A",J=p=>({high:"高风险",medium:"中风险",low:"低风险"})[p]||"低风险";return W(()=>{console.log("Dashboard页面已加载")}),(p,s)=>{const m=u("el-option"),A=u("el-select"),i=u("el-col"),L=u("el-date-picker"),P=u("el-icon"),Q=u("el-button"),C=u("el-row"),X=u("el-tag");return d(),x("div",$e,[t("div",Ae,[e(C,{gutter:20},{default:a(()=>[e(i,{span:6},{default:a(()=>[e(A,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=l=>_.value=l),placeholder:"选择时间范围"},{default:a(()=>[e(m,{label:"今日",value:"today"}),e(m,{label:"近7天",value:"week"}),e(m,{label:"近30天",value:"month"}),e(m,{label:"自定义",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),e(i,{span:6},{default:a(()=>[e(A,{modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=l=>y.value=l),placeholder:"聚合维度"},{default:a(()=>[e(m,{label:"按炉",value:"furnace"}),e(m,{label:"按班",value:"shift"}),e(m,{label:"按钢种",value:"steelType"})]),_:1},8,["modelValue"])]),_:1}),e(i,{span:6},{default:a(()=>[_.value==="custom"?(d(),v(L,{key:0,modelValue:F.value,"onUpdate:modelValue":s[2]||(s[2]=l=>F.value=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])):Y("",!0)]),_:1}),e(i,{span:6},{default:a(()=>[e(Q,{type:"primary",onClick:I},{default:a(()=>[e(P,null,{default:a(()=>[e(c(pe))]),_:1}),s[3]||(s[3]=S(" 刷新数据 ",-1))]),_:1})]),_:1})]),_:1})]),t("div",Pe,[e(C,{gutter:20},{default:a(()=>[e(i,{span:6},{default:a(()=>[e(b,{title:"温度/碳命中率",value:k.value,unit:"%",target:97,trend:T.value,color:"#67C23A"},null,8,["value","trend"])]),_:1}),e(i,{span:6},{default:a(()=>[e(b,{title:"钢中P波动",value:h.value,unit:"%",target:.003,trend:M.value,color:"#E6A23C"},null,8,["value","trend"])]),_:1}),e(i,{span:6},{default:a(()=>[e(b,{title:"石灰单耗降幅",value:w.value,unit:"%",target:5,trend:D.value,color:"#409EFF"},null,8,["value","trend"])]),_:1}),e(i,{span:6},{default:a(()=>[e(b,{title:"年度累计节约",value:E.value,unit:"万元",target:1e3,trend:N.value,color:"#F56C6C"},null,8,["value","trend"])]),_:1})]),_:1})]),t("div",Se,[e(C,{gutter:20},{default:a(()=>[e(i,{span:12},{default:a(()=>[t("div",Ve,[s[4]||(s[4]=t("h3",null,"命中率趋势",-1)),e(c(R),{option:O.value,style:{height:"300px"},onClick:$},null,8,["option"])])]),_:1}),e(i,{span:12},{default:a(()=>[t("div",Ee,[s[5]||(s[5]=t("h3",null,"P波动趋势",-1)),e(c(R),{option:z.value,style:{height:"300px"},onClick:$},null,8,["option"])])]),_:1})]),_:1}),e(C,{gutter:20,style:{"margin-top":"20px"}},{default:a(()=>[e(i,{span:12},{default:a(()=>[t("div",Te,[s[6]||(s[6]=t("h3",null,"未命中原因分布",-1)),e(c(R),{option:q.value,style:{height:"300px"}},null,8,["option"])])]),_:1}),e(i,{span:12},{default:a(()=>[t("div",Me,[s[7]||(s[7]=t("h3",null,"进行中炉次",-1)),t("div",De,[(d(!0),x(Z,null,ee(B.value,l=>(d(),x("div",{key:l.id,class:"furnace-card",onClick:He=>K(l.id)},[t("div",Be,[t("span",Oe,o(l.id),1),e(X,{type:U(l.status),size:"small"},{default:a(()=>[S(o(l.status),1)]),_:2},1032,["type"])]),t("div",ze,[t("div",qe,[t("span",null,"阶段："+o(l.stage),1),t("span",null,"预计终点："+o(l.estimatedEnd),1)]),t("div",Ie,[t("span",null,"T预测："+o(l.tempPrediction)+"°C",1),t("span",null,"C预测："+o(l.carbonPrediction)+"%",1)]),t("div",Ke,[e(P,{color:H(l.slagRisk),size:"16"},{default:a(()=>[l.slagRisk==="high"?(d(),v(c(_e),{key:0})):l.slagRisk==="medium"?(d(),v(c(me),{key:1})):(d(),v(c(ve),{key:2}))]),_:2},1032,["color"]),t("span",null,"溅渣风险："+o(J(l.slagRisk)),1)])])],8,Ne))),128))])])]),_:1})]),_:1})])])}}},je=V(Ue,[["__scopeId","data-v-ed9bb2b2"]]);export{je as default};
