import{u as ie,i as re,a as de,h as ue,j as pe,c as me,d as ce,e as _e,f as ye,k as ve,H as y}from"./echarts-a243c330.js";import{v as ge,b as fe,x as xe,y as be,h as O}from"./element-b9b1fa5e.js";import{_ as Fe}from"./index-cde79e31.js";import{r as p,l as Ce,c as v,m as he,al as i,z as d,A as m,B as o,R as e,J as l,M as D,u,O as g,P as f,I as z,Q as V,a4 as A,E as R}from"./vendor-f95dc610.js";const Ve={class:"analysis"},Ae={class:"furnace-selector"},ke={key:0,class:"compare-selector"},Se={class:"gantt-section"},Ee={class:"gantt-chart"},we={class:"gantt-timeline"},Oe={class:"time-axis"},Pe={class:"gantt-bars"},Te={class:"event-label"},Be={class:"process-curves"},Ie={class:"root-cause-analysis"},$e={class:"slag-analysis"},Ne={class:"experience-notes"},Ue={class:"notes-list"},De={class:"note-header"},ze={class:"note-tag"},Re={class:"note-time"},Me={class:"note-content"},Qe={class:"note-tags"},Le={__name:"Analysis",setup(je){ie([re,de,ue,pe,me,ce,_e,ye,ve]);const k=p("F001"),F=p(!1),P=p("F001"),T=p("F002"),B=p("temperature"),I=p("deltaP"),C=p(!1),M=p(["14:00","14:10","14:20","14:30","14:40","15:00"]),Q=p([{id:1,name:"装料",start:"14:00",end:"14:05",color:"#409EFF"},{id:2,name:"吹炼",start:"14:05",end:"14:20",color:"#67C23A"},{id:3,name:"取样",start:"14:20",end:"14:22",color:"#E6A23C"},{id:4,name:"调整",start:"14:22",end:"14:25",color:"#F56C6C"},{id:5,name:"出钢",start:"14:25",end:"14:30",color:"#909399"}]),S=p([{id:1,tag:"工艺优化",time:"2024-01-15 14:30",content:"本次炉次在终点调整阶段温度控制较好，建议在类似条件下采用相同的氧流量控制策略",tags:["温度控制","氧流量","终点调整"]},{id:2,tag:"原料控制",time:"2024-01-15 13:45",content:"石灰质量稳定，脱磷效果良好，建议保持当前石灰用量配比",tags:["石灰","脱磷","配比"]}]),s=Ce({tag:"",content:"",tags:""}),L=v(()=>({tooltip:{trigger:"axis"},legend:{data:["预测温度","实际温度","目标区间"]},xAxis:{type:"category",data:["14:00","14:05","14:10","14:15","14:20","14:25"]},yAxis:{type:"value",name:"温度(°C)"},series:[{name:"预测温度",type:"line",data:[1650,1680,1700,1685,1670,1665],smooth:!0,itemStyle:{color:"#409EFF"}},{name:"实际温度",type:"line",data:[1650,1675,1695,1680,1675,1668],smooth:!0,itemStyle:{color:"#67C23A"}},{name:"目标区间",type:"line",data:[1650,1650,1650,1650,1650,1650],lineStyle:{color:"#F56C6C",type:"dashed"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(245, 108, 108, 0.3)"},{offset:1,color:"rgba(245, 108, 108, 0.1)"}]}}}]})),j=v(()=>({tooltip:{trigger:"axis"},legend:{data:["预测碳含量","实际碳含量","目标区间"]},xAxis:{type:"category",data:["14:00","14:05","14:10","14:15","14:20","14:25"]},yAxis:{type:"value",name:"碳含量(%)"},series:[{name:"预测碳含量",type:"line",data:[.15,.12,.08,.06,.05,.05],smooth:!0,itemStyle:{color:"#409EFF"}},{name:"实际碳含量",type:"line",data:[.15,.13,.09,.07,.06,.05],smooth:!0,itemStyle:{color:"#67C23A"}}]})),q=v(()=>({tooltip:{trigger:"axis"},legend:{data:["预测渣碱度","实际渣碱度","目标区间"]},xAxis:{type:"category",data:["14:00","14:05","14:10","14:15","14:20","14:25"]},yAxis:{type:"value",name:"渣碱度"},series:[{name:"预测渣碱度",type:"line",data:[2.8,3,3.2,3.1,3,3],smooth:!0,itemStyle:{color:"#409EFF"}},{name:"实际渣碱度",type:"line",data:[2.8,3.1,3.3,3.2,3.1,3],smooth:!0,itemStyle:{color:"#67C23A"}}]})),H=v(()=>({tooltip:{},legend:{data:["数据质量","模型精度","执行偏差","设备状态"]},radar:{indicator:[{name:"数据质量",max:100},{name:"模型精度",max:100},{name:"执行偏差",max:100},{name:"设备状态",max:100}]},series:[{name:"根因权重",type:"radar",data:[{value:[85,92,78,88],name:"当前炉次",itemStyle:{color:"#409EFF"}}]}]})),J=v(()=>({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["班次1","班次2","班次3","班次4","班次5"]},yAxis:{type:"value",name:"ΔP(%)"},series:[{name:"ΔP分布",type:"bar",data:[.002,.003,.0025,.0028,.0022],itemStyle:{color:"#67C23A"}}]})),W=v(()=>({tooltip:{trigger:"item"},xAxis:{type:"value",name:"R值"},yAxis:{type:"value",name:"FeO(%)"},series:[{name:"R-FeO关系",type:"scatter",data:[[3,15],[3.1,14],[3.2,13],[3.3,12],[3.4,11]],itemStyle:{color:"#409EFF"}}]})),G=v(()=>({tooltip:{trigger:"axis"},xAxis:{type:"category",data:["1","2","3","4","5","6","7","8","9","10"]},yAxis:{type:"value",name:"P含量(%)"},series:[{name:"P含量",type:"line",data:[.025,.023,.024,.022,.025,.023,.024,.021,.025,.023],smooth:!0,itemStyle:{color:"#67C23A"}},{name:"控制上限",type:"line",data:[.03,.03,.03,.03,.03,.03,.03,.03,.03,.03],lineStyle:{color:"#F56C6C",type:"dashed"}},{name:"控制下限",type:"line",data:[.02,.02,.02,.02,.02,.02,.02,.02,.02,.02],lineStyle:{color:"#F56C6C",type:"dashed"}}]})),K=()=>{console.log("加载炉次数据:",k.value)},X=()=>{O.success("优化模板已生成")},Y=()=>{O.success("报告导出中...")},Z=r=>(parseInt(r.split(":")[0])*60+parseInt(r.split(":")[1])-840)/(900-840)*100,ee=r=>(parseInt(r.split(":")[0])*60+parseInt(r.split(":")[1])-840)/(900-840)*100,te=(r,t)=>{const n=parseInt(r.split(":")[0])*60+parseInt(r.split(":")[1]);return(parseInt(t.split(":")[0])*60+parseInt(t.split(":")[1])-n)/60*100},le=()=>{C.value=!0},ae=()=>{const r={id:S.value.length+1,tag:s.tag,time:new Date().toLocaleString("zh-CN"),content:s.content,tags:s.tags.split(",").map(t=>t.trim()).filter(t=>t)};S.value.push(r),C.value=!1,s.tag="",s.content="",s.tags="",O.success("注释已保存")};return he(()=>{console.log("炉次复盘页面已加载")}),(r,t)=>{const n=i("el-option"),_=i("el-select"),c=i("el-col"),h=i("el-icon"),x=i("el-button"),E=i("el-row"),b=i("el-tab-pane"),$=i("el-tabs"),oe=i("el-tag"),w=i("el-form-item"),N=i("el-input"),ne=i("el-form"),se=i("el-dialog");return d(),m("div",Ve,[o("div",Ae,[e(E,{gutter:20},{default:l(()=>[e(c,{span:8},{default:l(()=>[e(_,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=a=>k.value=a),placeholder:"选择炉次",onChange:K},{default:l(()=>[e(n,{label:"F001 - Q235B",value:"F001"}),e(n,{label:"F002 - Q345B",value:"F002"}),e(n,{label:"F003 - Q235B",value:"F003"})]),_:1},8,["modelValue"])]),_:1}),e(c,{span:8},{default:l(()=>[e(x,{type:"primary",onClick:t[1]||(t[1]=a=>F.value=!F.value)},{default:l(()=>[e(h,null,{default:l(()=>[e(u(ge))]),_:1}),g(" "+f(F.value?"退出对比":"对比模式"),1)]),_:1}),F.value?D("",!0):(d(),z(x,{key:0,type:"success",onClick:X},{default:l(()=>[e(h,null,{default:l(()=>[e(u(fe))]),_:1}),t[11]||(t[11]=g(" 生成优化模板 ",-1))]),_:1}))]),_:1}),e(c,{span:8},{default:l(()=>[e(x,{type:"warning",onClick:Y},{default:l(()=>[e(h,null,{default:l(()=>[e(u(xe))]),_:1}),t[12]||(t[12]=g(" 导出报告 ",-1))]),_:1})]),_:1})]),_:1})]),F.value?(d(),m("div",ke,[e(E,{gutter:20},{default:l(()=>[e(c,{span:12},{default:l(()=>[e(_,{modelValue:P.value,"onUpdate:modelValue":t[2]||(t[2]=a=>P.value=a),placeholder:"选择对比炉次A"},{default:l(()=>[e(n,{label:"F001 - 标杆炉次",value:"F001"}),e(n,{label:"F002 - 方案A",value:"F002"})]),_:1},8,["modelValue"])]),_:1}),e(c,{span:12},{default:l(()=>[e(_,{modelValue:T.value,"onUpdate:modelValue":t[3]||(t[3]=a=>T.value=a),placeholder:"选择对比炉次B"},{default:l(()=>[e(n,{label:"F002 - 方案B",value:"F002"}),e(n,{label:"F003 - 方案C",value:"F003"})]),_:1},8,["modelValue"])]),_:1})]),_:1})])):D("",!0),e(E,{gutter:20},{default:l(()=>[e(c,{span:16},{default:l(()=>[o("div",Se,[t[13]||(t[13]=o("h3",null,"全过程事件甘特图",-1)),o("div",Ee,[o("div",we,[o("div",Oe,[(d(!0),m(V,null,A(M.value,a=>(d(),m("div",{key:a,class:"time-marker",style:R({left:Z(a)+"%"})},f(a)+":00 ",5))),128))]),o("div",Pe,[(d(!0),m(V,null,A(Q.value,a=>(d(),m("div",{key:a.id,class:"gantt-bar",style:R({left:ee(a.start)+"%",width:te(a.start,a.end)+"%",backgroundColor:a.color})},[o("span",Te,f(a.name),1)],4))),128))])])])]),o("div",Be,[t[14]||(t[14]=o("h3",null,"过程曲线对比",-1)),e($,{modelValue:B.value,"onUpdate:modelValue":t[4]||(t[4]=a=>B.value=a)},{default:l(()=>[e(b,{label:"温度曲线",name:"temperature"},{default:l(()=>[e(u(y),{option:L.value,style:{height:"300px"}},null,8,["option"])]),_:1}),e(b,{label:"碳含量曲线",name:"carbon"},{default:l(()=>[e(u(y),{option:j.value,style:{height:"300px"}},null,8,["option"])]),_:1}),e(b,{label:"渣碱度曲线",name:"basicity"},{default:l(()=>[e(u(y),{option:q.value,style:{height:"300px"}},null,8,["option"])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e(c,{span:8},{default:l(()=>[o("div",Ie,[t[15]||(t[15]=o("h3",null,"根因分析雷达图",-1)),e(u(y),{option:H.value,style:{height:"300px"}},null,8,["option"])]),o("div",$e,[t[16]||(t[16]=o("h3",null,"渣系与脱磷分析",-1)),e($,{modelValue:I.value,"onUpdate:modelValue":t[5]||(t[5]=a=>I.value=a)},{default:l(()=>[e(b,{label:"ΔP分布",name:"deltaP"},{default:l(()=>[e(u(y),{option:J.value,style:{height:"250px"}},null,8,["option"])]),_:1}),e(b,{label:"R/FeO散点",name:"rFeo"},{default:l(()=>[e(u(y),{option:W.value,style:{height:"250px"}},null,8,["option"])]),_:1}),e(b,{label:"班次控制图",name:"control"},{default:l(()=>[e(u(y),{option:G.value,style:{height:"250px"}},null,8,["option"])]),_:1})]),_:1},8,["modelValue"])]),o("div",Ne,[t[18]||(t[18]=o("h3",null,"经验注释",-1)),o("div",Ue,[(d(!0),m(V,null,A(S.value,a=>(d(),m("div",{key:a.id,class:"note-item"},[o("div",De,[o("span",ze,f(a.tag),1),o("span",Re,f(a.time),1)]),o("div",Me,f(a.content),1),o("div",Qe,[(d(!0),m(V,null,A(a.tags,U=>(d(),z(oe,{key:U,size:"small",type:"info"},{default:l(()=>[g(f(U),1)]),_:2},1024))),128))])]))),128))]),e(x,{type:"primary",size:"small",onClick:le},{default:l(()=>[e(h,null,{default:l(()=>[e(u(be))]),_:1}),t[17]||(t[17]=g(" 添加注释 ",-1))]),_:1})])]),_:1})]),_:1}),e(se,{modelValue:C.value,"onUpdate:modelValue":t[10]||(t[10]=a=>C.value=a),title:"添加经验注释",width:"500px"},{footer:l(()=>[e(x,{onClick:t[9]||(t[9]=a=>C.value=!1)},{default:l(()=>[...t[19]||(t[19]=[g("取消",-1)])]),_:1}),e(x,{type:"primary",onClick:ae},{default:l(()=>[...t[20]||(t[20]=[g("保存",-1)])]),_:1})]),default:l(()=>[e(ne,{model:s,"label-width":"80px"},{default:l(()=>[e(w,{label:"标签"},{default:l(()=>[e(_,{modelValue:s.tag,"onUpdate:modelValue":t[6]||(t[6]=a=>s.tag=a),placeholder:"选择标签"},{default:l(()=>[e(n,{label:"工艺优化",value:"process"}),e(n,{label:"设备维护",value:"equipment"}),e(n,{label:"原料控制",value:"material"}),e(n,{label:"操作技巧",value:"operation"})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"内容"},{default:l(()=>[e(N,{modelValue:s.content,"onUpdate:modelValue":t[7]||(t[7]=a=>s.content=a),type:"textarea",rows:4,placeholder:"请输入注释内容"},null,8,["modelValue"])]),_:1}),e(w,{label:"标签"},{default:l(()=>[e(N,{modelValue:s.tags,"onUpdate:modelValue":t[8]||(t[8]=a=>s.tags=a),placeholder:"输入标签，用逗号分隔"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ge=Fe(Le,[["__scopeId","data-v-8e48fd6b"]]);export{Ge as default};
